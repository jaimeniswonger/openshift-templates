- name: Check for existence of config map named bootstrap-config
  action: command oc get cm/bootstrap-config -o name --ignore-not-found -n {{ openshift_project_name }}
  register: configmap_check_result
  
#- debug: var=configmap_check_result

- name: Create config map named bootstrap-config from template
  template:
    src: "./templates/bootstrap-configmap.j2"
    dest: "{{ mktemp.stdout }}/bootstrap-configmap.yaml"
  changed_when: no
  when: configmap_check_result.stdout == ""

- name: Install configmap named bootstrap-config 
  action: command oc create -f {{ mktemp.stdout }}/bootstrap-configmap.yaml -n {{ openshift_project_name }}
  when: configmap_check_result.stdout == ""